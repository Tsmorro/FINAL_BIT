{"version":3,"file":"bit-paginator.umd.js","sources":["ng://@bit/primefaces.primeng.paginator/paginator/paginator.ts"],"sourcesContent":["import {NgModule,Component,OnInit,Input,Output,ChangeDetectorRef,EventEmitter,TemplateRef} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule} from '@angular/forms';\nimport {DropdownModule} from '../dropdown/dropdown';\nimport {SelectItem} from '../common/selectitem';\nimport {SharedModule} from '../common/shared';\n\n@Component({\n    selector: 'p-paginator',\n    template: `\n        <div [class]=\"styleClass\" [ngStyle]=\"style\" [ngClass]=\"'ui-paginator ui-widget ui-widget-header ui-unselectable-text ui-helper-clearfix'\"\n            *ngIf=\"alwaysShow ? true : (pageLinks && pageLinks.length > 1)\">\n            <div class=\"ui-paginator-left-content\" *ngIf=\"templateLeft\">\n                <ng-container *ngTemplateOutlet=\"templateLeft; context: {$implicit: paginatorState}\"></ng-container>\n            </div>\n            <span class=\"ui-paginator-current\" *ngIf=\"showCurrentPageReport\">{{currentPageReport}}</span>\n            <a [attr.tabindex]=\"isFirstPage() ? null : '0'\" class=\"ui-paginator-first ui-paginator-element ui-state-default ui-corner-all\"\n                    (click)=\"changePageToFirst($event)\" (keydown.enter)=\"changePageToFirst($event)\" [ngClass]=\"{'ui-state-disabled':isFirstPage()}\" [tabindex]=\"isFirstPage() ? -1 : null\">\n                <span class=\"ui-paginator-icon pi pi-step-backward\"></span>\n            </a>\n            <a tabindex=\"0\" [attr.tabindex]=\"isFirstPage() ? null : '0'\" class=\"ui-paginator-prev ui-paginator-element ui-state-default ui-corner-all\"\n                    (click)=\"changePageToPrev($event)\" (keydown.enter)=\"changePageToPrev($event)\" [ngClass]=\"{'ui-state-disabled':isFirstPage()}\" [tabindex]=\"isFirstPage() ? -1 : null\">\n                <span class=\"ui-paginator-icon pi pi-caret-left\"></span>\n            </a>\n            <span class=\"ui-paginator-pages\">\n                <a tabindex=\"0\" *ngFor=\"let pageLink of pageLinks\" class=\"ui-paginator-page ui-paginator-element ui-state-default ui-corner-all\"\n                    (click)=\"onPageLinkClick($event, pageLink - 1)\" (keydown.enter)=\"onPageLinkClick($event, pageLink - 1)\" [ngClass]=\"{'ui-state-active': (pageLink-1 == getPage())}\">{{pageLink}}</a>\n            </span>\n            <a [attr.tabindex]=\"isLastPage() ? null : '0'\" class=\"ui-paginator-next ui-paginator-element ui-state-default ui-corner-all\"\n                    (click)=\"changePageToNext($event)\" (keydown.enter)=\"changePageToNext($event)\" [ngClass]=\"{'ui-state-disabled':isLastPage()}\" [tabindex]=\"isLastPage() ? -1 : null\">\n                <span class=\"ui-paginator-icon pi pi-caret-right\"></span>\n            </a>\n            <a [attr.tabindex]=\"isLastPage() ? null : '0'\" class=\"ui-paginator-last ui-paginator-element ui-state-default ui-corner-all\"\n                    (click)=\"changePageToLast($event)\" (keydown.enter)=\"changePageToLast($event)\" [ngClass]=\"{'ui-state-disabled':isLastPage()}\" [tabindex]=\"isLastPage() ? -1 : null\">\n                <span class=\"ui-paginator-icon pi pi-step-forward\"></span>\n            </a>\n            <p-dropdown [options]=\"rowsPerPageItems\" [(ngModel)]=\"rows\" *ngIf=\"rowsPerPageOptions\" \n                (onChange)=\"onRppChange($event)\" [appendTo]=\"dropdownAppendTo\" [scrollHeight]=\"dropdownScrollHeight\"></p-dropdown>\n            <div class=\"ui-paginator-right-content\" *ngIf=\"templateRight\">\n                <ng-container *ngTemplateOutlet=\"templateRight; context: {$implicit: paginatorState}\"></ng-container>\n            </div>\n        </div>\n    `\n})\nexport class Paginator implements OnInit {\n\n    @Input() pageLinkSize: number = 5;\n\n    @Output() onPageChange: EventEmitter<any> = new EventEmitter();\n\n    @Input() style: any;\n\n    @Input() styleClass: string;\n\n    @Input() alwaysShow: boolean = true;\n    \n    @Input() templateLeft: TemplateRef<any>;\n    \n    @Input() templateRight: TemplateRef<any>;\n\n    @Input() dropdownAppendTo: any;\n\n    @Input() dropdownScrollHeight: string = '200px';\n\n    @Input() currentPageReportTemplate: string = '{currentPage} of {totalPages}';\n\n    @Input() showCurrentPageReport: boolean;\n\n    pageLinks: number[];\n\n    _totalRecords: number = 0;\n\n    _first: number = 0;\n\n    _rows: number = 0;\n    \n    _rowsPerPageOptions: any[];\n    \n    rowsPerPageItems: SelectItem[];\n    \n    paginatorState: any;\n\n    constructor(private cd: ChangeDetectorRef) {}\n    \n    ngOnInit() {\n        this.updatePaginatorState();\n    }\n\n    @Input() get totalRecords(): number {\n        return this._totalRecords;\n    }\n\n    set totalRecords(val:number) {\n        this._totalRecords = val;\n        this.updatePageLinks();\n        this.updatePaginatorState();\n        this.updateFirst();\n        this.updateRowsPerPageOptions();\n    }\n\n    @Input() get first(): number {\n        return this._first;\n    }\n\n    set first(val:number) {\n        this._first = val;\n        this.updatePageLinks();\n        this.updatePaginatorState();\n    }\n\n    @Input() get rows(): number {\n        return this._rows;\n    }\n\n    set rows(val:number) {\n        this._rows = val;\n        this.updatePageLinks();\n        this.updatePaginatorState();\n    }\n    \n    @Input() get rowsPerPageOptions(): any[] {\n        return this._rowsPerPageOptions;\n    }\n\n    set rowsPerPageOptions(val:any[]) {\n        this._rowsPerPageOptions = val;\n        this.updateRowsPerPageOptions();\n    }\n\n    updateRowsPerPageOptions() {\n        if(this.rowsPerPageOptions) {\n            this.rowsPerPageItems = [];\n            for (let opt of this.rowsPerPageOptions) {\n                if (typeof opt == 'object' && opt['showAll']) {\n                    this.rowsPerPageItems.push({label: opt['showAll'], value: this.totalRecords});\n                }\n                else {\n                    this.rowsPerPageItems.push({label: String(opt), value: opt});\n                }\n            }\n        }\n    }\n\n    isFirstPage() {\n        return this.getPage() === 0;\n    }\n\n    isLastPage() {\n        return this.getPage() === this.getPageCount() - 1;\n    }\n\n    getPageCount() {\n        return Math.ceil(this.totalRecords/this.rows)||1;\n    }\n\n    calculatePageLinkBoundaries() {\n        let numberOfPages = this.getPageCount(),\n        visiblePages = Math.min(this.pageLinkSize, numberOfPages);\n\n        //calculate range, keep current in middle if necessary\n        let start = Math.max(0, Math.ceil(this.getPage() - ((visiblePages) / 2))),\n        end = Math.min(numberOfPages - 1, start + visiblePages - 1);\n\n        //check when approaching to last page\n        var delta = this.pageLinkSize - (end - start + 1);\n        start = Math.max(0, start - delta);\n\n        return [start, end];\n    }\n\n    updatePageLinks() {\n        this.pageLinks = [];\n        let boundaries = this.calculatePageLinkBoundaries(),\n        start = boundaries[0],\n        end = boundaries[1];\n\n        for(let i = start; i <= end; i++) {\n            this.pageLinks.push(i + 1);\n        }\n    }\n\n    changePage(p :number) {\n        var pc = this.getPageCount();\n\n        if(p >= 0 && p < pc) {\n            this.first = this.rows * p;\n            var state = {\n                page: p,\n                first: this.first,\n                rows: this.rows,\n                pageCount: pc\n            };\n            this.updatePageLinks();\n\n            this.onPageChange.emit(state);\n            this.updatePaginatorState();\n        }\n    }\n\n    updateFirst() {\n        const page = this.getPage();\n        if (page > 0 && (this.first >= this.totalRecords)) {\n            Promise.resolve(null).then(() => this.changePage(page - 1));\n        }\n    }\n\n    getPage(): number {\n        return Math.floor(this.first / this.rows);\n    }\n\n    changePageToFirst(event) {\n      if(!this.isFirstPage()){\n          this.changePage(0);\n      }\n\n      event.preventDefault();\n    }\n\n    changePageToPrev(event) {\n        this.changePage(this.getPage() - 1);\n        event.preventDefault();\n    }\n\n    changePageToNext(event) {\n        this.changePage(this.getPage()  + 1);\n        event.preventDefault();\n    }\n\n    changePageToLast(event) {\n      if(!this.isLastPage()){\n          this.changePage(this.getPageCount() - 1);\n      }\n\n      event.preventDefault();\n    }\n\n    onPageLinkClick(event, page) {\n        this.changePage(page);\n        event.preventDefault();\n    }\n\n    onRppChange(event) {\n        this.changePage(this.getPage());\n    }\n    \n    updatePaginatorState() {\n        this.paginatorState = {\n            page: this.getPage(),\n            pageCount: this.getPageCount(),\n            rows: this.rows,\n            first: this.first,\n            totalRecords: this.totalRecords\n        }\n    }\n\n    get currentPageReport() {\n        return this.currentPageReportTemplate\n            .replace(\"{currentPage}\", (this.getPage() + 1).toString())\n            .replace(\"{totalPages}\", this.getPageCount().toString());\n    }\n}\n\n@NgModule({\n    imports: [CommonModule,DropdownModule,FormsModule,SharedModule],\n    exports: [Paginator,DropdownModule,FormsModule,SharedModule],\n    declarations: [Paginator]\n})\nexport class PaginatorModule { }\n"],"names":["EventEmitter","Component","ChangeDetectorRef","Input","Output","NgModule","CommonModule","DropdownModule","FormsModule","SharedModule"],"mappings":"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"}